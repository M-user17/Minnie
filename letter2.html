<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
  <link rel="stylesheet" href="./css/main.css">
  <title>Page 2</title>
</head>
<body>
  
  <div class="backgroundParty">
    <audio class="song" controls loop>
      <source src="assets/hbd.mp3"></source>
      Your browser isn't invited for super fun audio time.
    </audio>

    <div class="letterForm">
      <input type="checkbox" id="mess">
      <div class="content">
        <div class="mainContent">

          <p class="mainContent_text"></p>

          <form class="mainContent_form hiden">
            <label>abc</label>
            <textarea class="mainContent_textarea"></textarea>
            <button type="button" class="mainContent_button recieve"><i class="fa-solid  fa-paw"></i></button>
          </form>

        </div>
        <div class="img1"><img class="img" src="" alt=""></div>
      </div>
      <label class="designBox" id="play" for="mess"></label>
    </div>
  </div>

  <script src="assets/jquery.min.js"></script>
  <script src="assets/effect.js"></script>



<script >



let mainContent_text = document.querySelector(".mainContent_text");
let mainContent_form = document.querySelector(".mainContent_form");
let recieve = document.querySelector(".recieve");
const mainContentLetter = "Chào bạn nhỏ, tôi là một fan hâm mộ bạn từ lâu rồi,Chúc bạn nhỏ có một hành trình du học thật tuyệt vời và đầy những trải nghiệm đáng nhớ. Hy vọng bạn sẽ thành công trong mọi lĩnh vực và đạt được những ước mơ lớn của mình" 
let imgLetter = document.querySelector(".img");
imgLetter.src = "./img/shy.png"; 
var timeouts = [];

document.querySelector("#mess").addEventListener("change", function () {
  mainContent_form.classList.add("hiden")
  recieve.style.opacity = 0;

  mainContent_text.innerHTML = "";
 

  for (let i = 0; i < timeouts.length; i++) {
    clearTimeout(timeouts[i]);
  }


    if (this.checked == true) {


        document.querySelector(".content").classList.add("actived")
        const splitMainContentLetter = mainContentLetter.split("");
        

        for (let i = 0; i < splitMainContentLetter.length; i++) {
          timeouts.push(setTimeout(() => {
            if (this.checked == true) {
              mainContent_text.innerHTML += splitMainContentLetter[i];
              if (i == splitMainContentLetter.length - 1) {
                  setTimeout(()=>{
                    mainContent_form.classList.remove("hiden")
                    recieve.style.opacity = 1;
                },1000)
                document.querySelector(".img1").setAttribute("style", "opacity: 1; transition: .5s");
              }
            }
            
          }, 50 * 1));
        }
        

    } else {

      for (let i = 0; i < timeouts.length; i++) {
        clearTimeout(timeouts[i]);
      }
        document.querySelector(".content").classList.remove("actived")
        document.querySelector(".img1").setAttribute("style", "opacity: 0; transition: .5s")
        mainContent_text.innerHTML = "";
        mainContent_form.classList.add("hiden")
        recieve.style.opacity = 0;
    }
})



  </script>


<script type="module">

  // Import the functions you need from the SDKs you need
  import { initializeApp } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-app.js";
  import { getDatabase , ref, set } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-database.js";
  // TODO: Add SDKs for Firebase products that you want to use
  // https://firebase.google.com/docs/web/setup#available-libraries

  // Your web app's Firebase configuration
  // For Firebase JS SDK v7.20.0 and later, measurementId is optional
  const firebaseConfig = {
    apiKey: "AIzaSyAQB7UCq7CglUh9gXqlV3GDSWeMF3DAtBQ",
    authDomain: "dominic-78022.firebaseapp.com",
    databaseURL: "https://dominic-78022-default-rtdb.asia-southeast1.firebasedatabase.app",
    projectId: "dominic-78022",
    storageBucket: "dominic-78022.appspot.com",
    messagingSenderId: "287324197260",
    appId: "1:287324197260:web:6c77f466cec2b79cc746a9",
    measurementId: "G-4N9M05M0DL"
  };

  // Initialize Firebase
  const app = initializeApp(firebaseConfig);
  // const database = getDatabase(app);

  
  
  
  function writeUserData(value) {
  let now = (new Date()).toLocaleString()
  const db = getDatabase(app);
    set(ref(db, '/' +`${now}`), {
    value: value,
    });
  }

  document.querySelector(".mainContent_button").addEventListener("click", ()=>{
    let text = document.querySelector(".mainContent_textarea").value;
    if(text != ""){
      writeUserData(text)
    }
  })


</script>





</body>
</html>
